<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <title>Presentation_RandBigData.utf8</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="libs/reveal.js-3.3.0.1/css/reveal.css"/>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="libs/reveal.js-3.3.0.1/css/theme/white.css" id="theme">


  <!-- some tweaks to reveal css -->
  <style type="text/css">
    .reveal h1 { font-size: 2.0em; }
    .reveal h2 { font-size: 1.5em;  }
    .reveal h3 { font-size: 1.25em;	}
    .reveal h4 { font-size: 1em;	}

    .reveal .slides>section,
    .reveal .slides>section>section {
      padding: 0px 0px;
    }



    .reveal table {
      border-width: 1px;
      border-spacing: 2px;
      border-style: dotted;
      border-color: gray;
      border-collapse: collapse;
      font-size: 0.7em;
    }

    .reveal table th {
      border-width: 1px;
      padding-left: 10px;
      padding-right: 25px;
      font-weight: bold;
      border-style: dotted;
      border-color: gray;
    }

    .reveal table td {
      border-width: 1px;
      padding-left: 10px;
      padding-right: 25px;
      border-style: dotted;
      border-color: gray;
    }


  </style>

    <style type="text/css">code{white-space: pre;}</style>

    <link rel="stylesheet" href="static\zireveal.css"/>

<!-- Printing and PDF exports -->
<script id="paper-css" type="application/dynamic-css">

/* Default Print Stylesheet Template
   by Rob Glazebrook of CSSnewbie.com
   Last Updated: June 4, 2008

   Feel free (nay, compelled) to edit, append, and
   manipulate this file as you see fit. */


@media print {

	/* SECTION 1: Set default width, margin, float, and
	   background. This prevents elements from extending
	   beyond the edge of the printed page, and prevents
	   unnecessary background images from printing */
	html {
		background: #fff;
		width: auto;
		height: auto;
		overflow: visible;
	}
	body {
		background: #fff;
		font-size: 20pt;
		width: auto;
		height: auto;
		border: 0;
		margin: 0 5%;
		padding: 0;
		overflow: visible;
		float: none !important;
	}

	/* SECTION 2: Remove any elements not needed in print.
	   This would include navigation, ads, sidebars, etc. */
	.nestedarrow,
	.controls,
	.fork-reveal,
	.share-reveal,
	.state-background,
	.reveal .progress,
	.reveal .backgrounds {
		display: none !important;
	}

	/* SECTION 3: Set body font face, size, and color.
	   Consider using a serif font for readability. */
	body, p, td, li, div {
		font-size: 20pt!important;
		font-family: Georgia, "Times New Roman", Times, serif !important;
		color: #000;
	}

	/* SECTION 4: Set heading font face, sizes, and color.
	   Differentiate your headings from your body text.
	   Perhaps use a large sans-serif for distinction. */
	h1,h2,h3,h4,h5,h6 {
		color: #000!important;
		height: auto;
		line-height: normal;
		font-family: Georgia, "Times New Roman", Times, serif !important;
		text-shadow: 0 0 0 #000 !important;
		text-align: left;
		letter-spacing: normal;
	}
	/* Need to reduce the size of the fonts for printing */
	h1 { font-size: 28pt !important;  }
	h2 { font-size: 24pt !important; }
	h3 { font-size: 22pt !important; }
	h4 { font-size: 22pt !important; font-variant: small-caps; }
	h5 { font-size: 21pt !important; }
	h6 { font-size: 20pt !important; font-style: italic; }

	/* SECTION 5: Make hyperlinks more usable.
	   Ensure links are underlined, and consider appending
	   the URL to the end of the link for usability. */
	a:link,
	a:visited {
		color: #000 !important;
		font-weight: bold;
		text-decoration: underline;
	}
	/*
	.reveal a:link:after,
	.reveal a:visited:after {
		content: " (" attr(href) ") ";
		color: #222 !important;
		font-size: 90%;
	}
	*/


	/* SECTION 6: more reveal.js specific additions by @skypanther */
	ul, ol, div, p {
		visibility: visible;
		position: static;
		width: auto;
		height: auto;
		display: block;
		overflow: visible;
		margin: 0;
		text-align: left !important;
	}
	.reveal pre,
	.reveal table {
		margin-left: 0;
		margin-right: 0;
	}
	.reveal pre code {
		padding: 20px;
		border: 1px solid #ddd;
	}
	.reveal blockquote {
		margin: 20px 0;
	}
	.reveal .slides {
		position: static !important;
		width: auto !important;
		height: auto !important;

		left: 0 !important;
		top: 0 !important;
		margin-left: 0 !important;
		margin-top: 0 !important;
		padding: 0 !important;
		zoom: 1 !important;

		overflow: visible !important;
		display: block !important;

		text-align: left !important;
		-webkit-perspective: none;
		   -moz-perspective: none;
		    -ms-perspective: none;
		        perspective: none;

		-webkit-perspective-origin: 50% 50%;
		   -moz-perspective-origin: 50% 50%;
		    -ms-perspective-origin: 50% 50%;
		        perspective-origin: 50% 50%;
	}
	.reveal .slides section {
		visibility: visible !important;
		position: static !important;
		width: auto !important;
		height: auto !important;
		display: block !important;
		overflow: visible !important;

		left: 0 !important;
		top: 0 !important;
		margin-left: 0 !important;
		margin-top: 0 !important;
		padding: 60px 20px !important;
		z-index: auto !important;

		opacity: 1 !important;

		page-break-after: always !important;

		-webkit-transform-style: flat !important;
		   -moz-transform-style: flat !important;
		    -ms-transform-style: flat !important;
		        transform-style: flat !important;

		-webkit-transform: none !important;
		   -moz-transform: none !important;
		    -ms-transform: none !important;
		        transform: none !important;

		-webkit-transition: none !important;
		   -moz-transition: none !important;
		    -ms-transition: none !important;
		        transition: none !important;
	}
	.reveal .slides section.stack {
		padding: 0 !important;
	}
	.reveal section:last-of-type {
		page-break-after: avoid !important;
	}
	.reveal section .fragment {
		opacity: 1 !important;
		visibility: visible !important;

		-webkit-transform: none !important;
		   -moz-transform: none !important;
		    -ms-transform: none !important;
		        transform: none !important;
	}
	.reveal section img {
		display: block;
		margin: 15px 0px;
		background: rgba(255,255,255,1);
		border: 1px solid #666;
		box-shadow: none;
	}

	.reveal section small {
		font-size: 0.8em;
	}

}  
</script>


<script id="pdf-css" type="application/dynamic-css">
    
/**
 * This stylesheet is used to print reveal.js
 * presentations to PDF.
 *
 * https://github.com/hakimel/reveal.js#pdf-export
 */

* {
	-webkit-print-color-adjust: exact;
}

body {
	margin: 0 auto !important;
	border: 0;
	padding: 0;
	float: none !important;
	overflow: visible;
}

html {
	width: 100%;
	height: 100%;
	overflow: visible;
}

/* Remove any elements not needed in print. */
.nestedarrow,
.reveal .controls,
.reveal .progress,
.reveal .playback,
.reveal.overview,
.fork-reveal,
.share-reveal,
.state-background {
	display: none !important;
}

h1, h2, h3, h4, h5, h6 {
	text-shadow: 0 0 0 #000 !important;
}

.reveal pre code {
	overflow: hidden !important;
	font-family: Courier, 'Courier New', monospace !important;
}

ul, ol, div, p {
	visibility: visible;
	position: static;
	width: auto;
	height: auto;
	display: block;
	overflow: visible;
	margin: auto;
}
.reveal {
	width: auto !important;
	height: auto !important;
	overflow: hidden !important;
}
.reveal .slides {
	position: static;
	width: 100%;
	height: auto;

	left: auto;
	top: auto;
	margin: 0 !important;
	padding: 0 !important;

	overflow: visible;
	display: block;

	-webkit-perspective: none;
	   -moz-perspective: none;
	    -ms-perspective: none;
	        perspective: none;

	-webkit-perspective-origin: 50% 50%; /* there isn't a none/auto value but 50-50 is the default */
	   -moz-perspective-origin: 50% 50%;
	    -ms-perspective-origin: 50% 50%;
	        perspective-origin: 50% 50%;
}

.reveal .slides section {
	page-break-after: always !important;

	visibility: visible !important;
	position: relative !important;
	display: block !important;
	position: relative !important;

	margin: 0 !important;
	padding: 0 !important;
	box-sizing: border-box !important;
	min-height: 1px;

	opacity: 1 !important;

	-webkit-transform-style: flat !important;
	   -moz-transform-style: flat !important;
	    -ms-transform-style: flat !important;
	        transform-style: flat !important;

	-webkit-transform: none !important;
	   -moz-transform: none !important;
	    -ms-transform: none !important;
	        transform: none !important;
}

.reveal section.stack {
	margin: 0 !important;
	padding: 0 !important;
	page-break-after: avoid !important;
	height: auto !important;
	min-height: auto !important;
}

.reveal img {
	box-shadow: none;
}

.reveal .roll {
	overflow: visible;
	line-height: 1em;
}

/* Slide backgrounds are placed inside of their slide when exporting to PDF */
.reveal section .slide-background {
	display: block !important;
	position: absolute;
	top: 0;
	left: 0;
	width: 100%;
	z-index: -1;
}

/* All elements should be above the slide-background */
.reveal section>* {
	position: relative;
	z-index: 1;
}

/* Display slide speaker notes when 'showNotes' is enabled */
.reveal .speaker-notes-pdf {
	display: block;
	width: 100%;
	max-height: none;
	left: auto;
	top: auto;
	z-index: 100;
}

/* Display slide numbers when 'slideNumber' is enabled */
.reveal .slide-number-pdf {
	display: block;
	position: absolute;
	font-size: 14px;
}

</script>


<script>
var style = document.createElement( 'style' );
style.type = 'text/css';
var style_script_id = window.location.search.match( /print-pdf/gi ) ? 'pdf-css' : 'paper-css';
var style_script = document.getElementById(style_script_id).text;
style.innerHTML = style_script;
document.getElementsByTagName('head')[0].appendChild(style);
</script>

    <script src="libs/kePrint-0.0.1/kePrint.js"></script>
</head>
<body>
  <div class="reveal">
    <div class="slides">


<section id="r-und-bigger-than-memory-data" class="slide level2">
<h2><br><br><br><strong>R und Big</strong>(ger than memory) <strong>Data</strong></h2>
<p><strong>Dr. Lars E. Kroll</strong><br />
<em>Fachbereich Data Science und Versorgungsanalysen</em> <img data-src="https://images.pexels.com/photos/1148820/pexels-photo-1148820.jpeg?auto=compress&amp;cs=tinysrgb&amp;dpr=2&amp;h=125" /></p>
<p>Stand: 17.04.2020</p>
</section>
<section id="hintergrund" class="slide level2" data-background="#0086C5">
<h2>Hintergrund</h2>
</section>
<section id="was-ist-das-problem" class="slide level2">
<h2>Was ist das Problem?</h2>
<p><strong>R</strong> ist bei kleinen Datensätzen sehr schnell, weil es alle Daten im Arbeitsspeicher des Computers hält.</p>
<p>Dies wird, wenn Datensätze analysiert werden sollen, bei Arbeit mit <strong>R</strong> wird im Vergleich zu Paketen wie <em>sas</em> oder <em>SPSS</em> problematisch.</p>
<p>Diese Präsentation führt in Techniken zur Analyse von Datensätzen ein, die auf die Festplatte eines Computers, nicht aber komplett in seinen Speicher passen.</p>
</section>
<section id="technischer-hintergrund" class="slide level2">
<h2>Technischer Hintergrund</h2>
<p><img src="Presentation_RandBigData_files/figure-revealjs/unnamed-chunk-1-1.png" width="768" /></p>
<p>Arbeitsspeicher (RAM) ist <em>100 mal schneller</em> als eine klassische Festplatte und <em>4 mal</em> schneller als der schnellste M2 PCIE4 SSD Speicher. Je mehr Daten im RAM analysiert werden, desto besser.</p>
</section>
<section id="lösungsansätze" class="slide level2">
<h2>Lösungsansätze</h2>
<p>Um große Datensätze mit R zu bearbeiten stehen verschiedene Lösungsansätze zur Verfügung:</p>
<p><strong>Gute Lösungen</strong> aber heute nicht Thema:</p>
<ul>
<li>Mehr RAM kaufen (bis zu 256GB sind aktuell möglich)</li>
<li>Arbeit mit Zufallsstichproben und verkleinerten Datensätzen</li>
</ul>
<p><strong>Heute Thema</strong></p>
<ul>
<li>Arbeiten mit R und <code>DBI</code> direkt auf Datenbanken</li>
<li>Parallelisierung von gestückelten Daten</li>
</ul>
</section>
<section id="arbeit-mit-datenbanken" class="slide level2" data-background="#0086C5">
<h2>Arbeit mit Datenbanken</h2>
</section>
<section id="r-und-datenbanken" class="slide level2">
<h2>R und Datenbanken</h2>
<p>Grundsätzlich können Daten, die bereits in einer relationalen oder nicht-relationalen Datenbank vorgehalten werden, immer direkt über geeignete Frontends analysiert werden.</p>
<p>R bietet mit dem Paket DBI aber ebenfalls eine Schnittstelle, um als Frontend einer Datenbank zu fungieren <a href="https://db.rstudio.com/">(mehr Informationen)</a>.</p>
<p>R ist aber auch in der Lage, Datensätze ohne Installation zusätzlicher Software in eine Datenbank auszulagern und auf dieser zu analysieren. Dadurch ist eine Nutzung von R mit Datensätzen möglich, die nicht in den Speicher des lokalen PC passen.</p>
<p>Das Vorgehen soll exemplarisch mit dem Beispieldaten <em>nycflights13</em> veranschaulicht werden.</p>
</section>
<section id="testdatensatz-nycflights13" class="slide level2">
<h2>Testdatensatz <em>nycflights13</em></h2>
<p>Der Testdatensatz umfasst 336776 Inlandsflüge, die im Jahr 2013 von den Flughäfen der Stadt New York City in Richtung von Zielen innerhalb der USA gestartet sind.</p>
<p>Als zusätzliche Metadaten sind Informationen zu Airlines, Flughäfen, Wetter und Flugzeugen enthalten.</p>
<p>Der Datensatz passt zwar in der Regel in den Arbeitsspeicher, alle Techniken funktionieren aber auch mit größeren Datensätzen.</p>
</section>
<section id="erzeugen-der-testdateien-als-csv" class="slide level2">
<h2>Erzeugen der Testdateien als csv</h2>
<p>Hier werden aus dem mitgelieferten Beispieldaten csv Dateien erstellt und gespeichert. In der Realität liegen wahrscheinlich bereits csv-Dateien vor, die bspw. mit dem <em>SQL Navigator</em> o.ä. aus einer DB extrahiert wurden.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="kw">library</span>(nycflights13)</a>
<a class="sourceLine" id="cb1-2" title="2"><span class="kw">write.csv</span>(nycflights13<span class="op">::</span>airlines,<span class="st">&quot;data/airlines.csv&quot;</span>)</a>
<a class="sourceLine" id="cb1-3" title="3"><span class="kw">write.csv</span>(nycflights13<span class="op">::</span>flights,<span class="st">&quot;data/flights.csv&quot;</span>)</a>
<a class="sourceLine" id="cb1-4" title="4"><span class="kw">write.csv</span>(nycflights13<span class="op">::</span>airports,<span class="st">&quot;data/airports.csv&quot;</span>)</a>
<a class="sourceLine" id="cb1-5" title="5"><span class="kw">write.csv</span>(nycflights13<span class="op">::</span>planes,<span class="st">&quot;data/planes.csv&quot;</span>)</a></code></pre></div>
</section>
<section id="erzeugen-einer-datenbank-aus-den-testdateien" class="slide level2">
<h2>Erzeugen einer Datenbank aus den Testdateien</h2>
<p>Es ist mit R möglich, große csv-Dateien in einer Datenbank zu speichern, ohne sie vorher in den Arbeitsspeicher zu laden.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1"><span class="co"># Create an empty DB</span></a>
<a class="sourceLine" id="cb2-2" title="2"><span class="kw">library</span>(<span class="st">&quot;RSQLite&quot;</span>)</a>
<a class="sourceLine" id="cb2-3" title="3">mylocaldb &lt;-<span class="st"> </span><span class="kw">dbConnect</span>(RSQLite<span class="op">::</span><span class="kw">SQLite</span>(), <span class="st">&quot;data/mylocaldb.sqlite&quot;</span>)</a>
<a class="sourceLine" id="cb2-4" title="4"><span class="cf">for</span> (myname <span class="cf">in</span> <span class="kw">c</span>(<span class="st">&quot;flights&quot;</span>,<span class="st">&quot;airlines&quot;</span>,<span class="st">&quot;airports&quot;</span>,<span class="st">&quot;planes&quot;</span>)) {</a>
<a class="sourceLine" id="cb2-5" title="5"><span class="kw">dbWriteTable</span>(<span class="dt">conn =</span> mylocaldb, <span class="dt">name =</span> myname, </a>
<a class="sourceLine" id="cb2-6" title="6">             <span class="dt">value =</span> <span class="kw">paste0</span>(<span class="st">&quot;data/&quot;</span>,myname,<span class="st">&quot;.csv&quot;</span>), </a>
<a class="sourceLine" id="cb2-7" title="7">             <span class="dt">row.names =</span> <span class="ot">FALSE</span>, <span class="dt">header =</span> <span class="ot">TRUE</span>, <span class="dt">overwrite=</span><span class="ot">TRUE</span>)  </a>
<a class="sourceLine" id="cb2-8" title="8">}</a></code></pre></div>
<p>Tabellen mit R verknüpfen:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1">flights &lt;-<span class="st"> </span><span class="kw">tbl</span>(mylocaldb,<span class="st">&quot;flights&quot;</span>)</a>
<a class="sourceLine" id="cb3-2" title="2">planes &lt;-<span class="st"> </span><span class="kw">tbl</span>(mylocaldb,<span class="st">&quot;planes&quot;</span>)</a>
<a class="sourceLine" id="cb3-3" title="3">airports &lt;-<span class="st"> </span><span class="kw">tbl</span>(mylocaldb,<span class="st">&quot;airports&quot;</span>)</a></code></pre></div>
</section>
<section id="was-sind-die-4-flugzeuge-mit-den-meisten-starts-in-nyc-2013" class="slide level2">
<h2>Was sind die 4 Flugzeuge mit den meisten Starts in NYC 2013?</h2>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1">flights <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">count</span>(tailnum) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">arrange</span>(<span class="op">-</span>n) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(tailnum<span class="op">!=</span><span class="st">&quot;NA&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb4-2" title="2"><span class="st">  </span><span class="kw">head</span>(<span class="dv">4</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">left_join</span>(planes,<span class="dt">by=</span><span class="st">&quot;tailnum&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb4-3" title="3"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">model=</span><span class="kw">paste</span>(manufacturer,model)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb4-4" title="4"><span class="st">  </span><span class="kw">select</span>(<span class="dt">Kennung=</span>tailnum,<span class="st">&quot;Starts&quot;</span>=n,<span class="dt">Modell=</span>model,<span class="dt">Baujahr=</span>year) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb4-5" title="5"><span class="st">  </span><span class="kw">mykable</span>()</a></code></pre></div>
<table class="table table-striped table-hover table-condensed table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;font-weight: bold;color: white !important;background-color: #0086C5 !important;">
Kennung
</th>
<th style="text-align:right;font-weight: bold;color: white !important;background-color: #0086C5 !important;">
Starts
</th>
<th style="text-align:left;font-weight: bold;color: white !important;background-color: #0086C5 !important;">
Modell
</th>
<th style="text-align:right;font-weight: bold;color: white !important;background-color: #0086C5 !important;">
Baujahr
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
“N725MQ”
</td>
<td style="text-align:right;">
575
</td>
<td style="text-align:left;">
</td>
<td style="text-align:right;">
</td>
</tr>
<tr>
<td style="text-align:left;">
“N722MQ”
</td>
<td style="text-align:right;">
513
</td>
<td style="text-align:left;">
</td>
<td style="text-align:right;">
</td>
</tr>
<tr>
<td style="text-align:left;">
“N723MQ”
</td>
<td style="text-align:right;">
507
</td>
<td style="text-align:left;">
</td>
<td style="text-align:right;">
</td>
</tr>
<tr>
<td style="text-align:left;">
“N711MQ”
</td>
<td style="text-align:right;">
486
</td>
<td style="text-align:left;">
“GULFSTREAM AEROSPACE” “G1159B”
</td>
<td style="text-align:right;">
1.976
</td>
</tr>
</tbody>
</table>
</section>
<section id="inlands-flugziele-von-nyc-mit-mehr-als-2500-flügen-2013" class="slide level2">
<h2>Inlands-Flugziele von NYC mit mehr als 2500 Flügen 2013</h2>
<ol type="1">
<li>Schritt: Flugrouten auszählen</li>
</ol>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1">allflights &lt;-<span class="st"> </span>flights <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(origin,dest) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">count</span>() <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-2" title="2"><span class="st">  </span><span class="kw">ungroup</span>() <span class="op">%&gt;%</span><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">id=</span><span class="kw">row_number</span>())</a>
<a class="sourceLine" id="cb5-3" title="3">plotdata &lt;-<span class="st"> </span><span class="kw">bind_rows</span>(</a>
<a class="sourceLine" id="cb5-4" title="4">  allflights <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(id,n,<span class="dt">faa=</span>origin) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">left_join</span>(.,</a>
<a class="sourceLine" id="cb5-5" title="5">      airports <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(faa,lat,lon)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb5-6" title="6"><span class="st">    </span><span class="kw">collect</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">type=</span><span class="st">&quot;origin&quot;</span>),allflights <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-7" title="7"><span class="st">    </span><span class="kw">select</span>(id,n,<span class="dt">faa=</span>dest) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">left_join</span>(.,airports <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-8" title="8"><span class="st">      </span><span class="kw">select</span>(faa,lat,lon)) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">collect</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">type=</span><span class="st">&quot;destination&quot;</span>))</a></code></pre></div>
<ol start="2" type="1">
<li>Schritt: Geodaten laden und Ergebnisdatensatz erstellen</li>
</ol>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1"><span class="kw">library</span>(<span class="st">&quot;sf&quot;</span>)</a>
<a class="sourceLine" id="cb6-2" title="2"><span class="kw">library</span>(<span class="st">&quot;rnaturalearth&quot;</span>)</a>
<a class="sourceLine" id="cb6-3" title="3">world &lt;-<span class="st"> </span><span class="kw">ne_countries</span>(<span class="dt">scale =</span> <span class="st">&quot;medium&quot;</span>, <span class="dt">returnclass =</span> <span class="st">&quot;sf&quot;</span>)</a>
<a class="sourceLine" id="cb6-4" title="4">connections_sf &lt;-<span class="st"> </span>plotdata <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(lat)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb6-5" title="5"><span class="st">  </span><span class="kw">st_as_sf</span>(<span class="dt">coords =</span> <span class="kw">c</span>(<span class="st">&quot;lon&quot;</span>, <span class="st">&quot;lat&quot;</span>), <span class="dt">crs =</span> <span class="dv">4326</span>, <span class="dt">agr =</span> <span class="st">&quot;constant&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb6-6" title="6"><span class="st">  </span><span class="kw">group_by</span>(id) <span class="op">%&gt;%</span><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">do_union =</span> <span class="ot">FALSE</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-7" title="7"><span class="st">  </span><span class="kw">st_cast</span>(<span class="st">&quot;LINESTRING&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">left_join</span>(plotdata <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(id,n))</a></code></pre></div>
</section>
<section class="slide level2">

<ol start="3" type="1">
<li>Schritt: Ergebnis mit ggplot und Hintergrundkarte plotten</li>
</ol>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1"><span class="kw">ggplot</span>(connections_sf) <span class="op">+</span><span class="st"> </span><span class="kw">theme_void</span>() <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb7-2" title="2"><span class="st">  </span><span class="kw">geom_sf</span>(<span class="dt">data=</span>world,<span class="dt">fill=</span><span class="st">&quot;lightgrey&quot;</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb7-3" title="3"><span class="st">  </span><span class="kw">geom_sf</span>(<span class="dt">data=</span>.<span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(n<span class="op">&lt;=</span><span class="dv">2500</span>),</a>
<a class="sourceLine" id="cb7-4" title="4">          <span class="dt">show.legend =</span> F,<span class="dt">color=</span><span class="st">&quot;darkgrey&quot;</span>)<span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb7-5" title="5"><span class="st">  </span><span class="kw">geom_sf</span>(<span class="dt">data=</span>.<span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(n<span class="op">&gt;</span><span class="dv">2500</span>),</a>
<a class="sourceLine" id="cb7-6" title="6">          <span class="dt">show.legend =</span> F,<span class="dt">color=</span><span class="st">&quot;darkred&quot;</span>,<span class="dt">size=</span><span class="fl">1.5</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb7-7" title="7"><span class="st">  </span><span class="kw">coord_sf</span>(<span class="dt">expand=</span><span class="ot">FALSE</span>,</a>
<a class="sourceLine" id="cb7-8" title="8">           <span class="dt">xlim =</span><span class="kw">c</span>(<span class="kw">st_bbox</span>(connections_sf)[<span class="dv">1</span>],<span class="kw">st_bbox</span>(connections_sf)[<span class="dv">3</span>]),</a>
<a class="sourceLine" id="cb7-9" title="9">           <span class="dt">ylim=</span><span class="kw">c</span>(<span class="kw">st_bbox</span>(connections_sf)[<span class="dv">2</span>],<span class="kw">st_bbox</span>(connections_sf)[<span class="dv">4</span>]))</a></code></pre></div>
<p><img src="Presentation_RandBigData_files/figure-revealjs/unnamed-chunk-8-1.png" width="480" style="display: block; margin: auto;" /></p>
</section>
<section id="regressionsanalyse" class="slide level2">
<h2>Regressionsanalyse</h2>
<p><strong>Fragestellung:</strong><br />
<em>Ist ein Flug von NYC umso pünktlicher, je weiter sein Ziel entfernt ist?</em></p>
<p>Es gibt verschiedene Pakete. Wir haben uns für das Paket <em>biglm</em> entschieden, dass die Daten Stückweise in den Arbeitsspeicher des PCs lädt.</p>
<p>Es gibt auch Ansätze, Modelle direkt auf Datenbanken zu rechnen. Hier werden alle Arbeitsschritte in SQL übersetzt und anschließend auf dem Backend ausgeführt. Dies ist bisher aber nur für wenige Modelle sinnvoll möglich. Mehr dazu hier: <a href="https://tidymodels.github.io/">tidymodels</a></p>
</section>
<section class="slide level2">

<p><strong>Ergebnistabelle:</strong></p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" title="1">model &lt;-<span class="st"> </span>flights <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">distance=</span>distance<span class="op">/</span><span class="dv">1000</span>,</a>
<a class="sourceLine" id="cb8-2" title="2">         <span class="dt">quartal=</span><span class="kw">as.character</span>(<span class="kw">floor</span>(month<span class="op">/</span><span class="dv">4</span>)<span class="op">+</span><span class="dv">1</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb8-3" title="3"><span class="st">  </span>biglm<span class="op">::</span><span class="kw">biglm</span>(dep_delay<span class="op">~</span><span class="dv">1</span><span class="op">+</span>distance<span class="op">+</span>quartal, <span class="dt">data=</span>.)</a>
<a class="sourceLine" id="cb8-4" title="4">broom<span class="op">::</span><span class="kw">tidy</span>(model) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mykable</span>()</a></code></pre></div>
<table class="table table-striped table-hover table-condensed table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;font-weight: bold;color: white !important;background-color: #0086C5 !important;">
term
</th>
<th style="text-align:right;font-weight: bold;color: white !important;background-color: #0086C5 !important;">
estimate
</th>
<th style="text-align:right;font-weight: bold;color: white !important;background-color: #0086C5 !important;">
std.error
</th>
<th style="text-align:right;font-weight: bold;color: white !important;background-color: #0086C5 !important;">
p.value
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
(Intercept)
</td>
<td style="text-align:right;">
12,049
</td>
<td style="text-align:right;">
0,168
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
distance
</td>
<td style="text-align:right;">
-1,001
</td>
<td style="text-align:right;">
0,093
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
quartal2.0
</td>
<td style="text-align:right;">
5,890
</td>
<td style="text-align:right;">
0,182
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
quartal3.0
</td>
<td style="text-align:right;">
-3,288
</td>
<td style="text-align:right;">
0,182
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
quartal4.0
</td>
<td style="text-align:right;">
4,989
</td>
<td style="text-align:right;">
0,274
</td>
<td style="text-align:right;">
0
</td>
</tr>
</tbody>
</table>
</section>
<section id="geschwindigkeitsvorteil-durch-datenbank" class="slide level2">
<h2>Geschwindigkeitsvorteil durch Datenbank?</h2>
<p>Nein, die Arbeit mit einer DB als Backend ist <strong>deutlich langsamer</strong> als die Arbeit im Arbeitsspeicher!</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" title="1">flights_ram&lt;-<span class="st"> </span>flights <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">collect</span>()</a>
<a class="sourceLine" id="cb9-2" title="2">start_time &lt;-<span class="st"> </span><span class="kw">Sys.time</span>()</a>
<a class="sourceLine" id="cb9-3" title="3">result &lt;-<span class="st"> </span>flights_ram <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(carrier) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb9-4" title="4"><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">Mean_delay=</span><span class="kw">mean</span>(sched_dep_time<span class="op">-</span>dep_time,<span class="dt">na.rm=</span>T))</a>
<a class="sourceLine" id="cb9-5" title="5">end_time &lt;-<span class="st"> </span><span class="kw">Sys.time</span>()</a>
<a class="sourceLine" id="cb9-6" title="6">t_ram &lt;-<span class="st"> </span><span class="kw">round</span>((end_time <span class="op">-</span><span class="st"> </span>start_time)<span class="op">*</span><span class="dv">1000</span>)</a></code></pre></div>
<table class="table table-striped table-hover table-condensed table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;font-weight: bold;color: white !important;background-color: #0086C5 !important;">
Method
</th>
<th style="text-align:left;font-weight: bold;color: white !important;background-color: #0086C5 !important;">
Result (msec)
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
RAM
</td>
<td style="text-align:left;">
43
</td>
</tr>
<tr>
<td style="text-align:left;">
SQLITE
</td>
<td style="text-align:left;">
183
</td>
</tr>
</tbody>
</table>
</section>
<section id="zwischenfazit-datenbanken" class="slide level2">
<h2>Zwischenfazit Datenbanken</h2>
<ul>
<li>Mit <strong>Datenbanken als Backend für R</strong> lassen sich die meisten deskriptiven Aufgaben bearbeiten.</li>
<li>Hierbei kann die vielen bekannte <em>tidyverse</em> Syntax genutzt werden.</li>
<li>Es stehen Schnittstellen für die meisten Backends zur Verfügung, mehr dazu <a href="https://db.rstudio.com/">hier</a>.</li>
<li>Die Nutzung von Datenbanken als Backend bietet gegenüber der Arbeit im Arbeitsspeicher jedoch <strong>Geschwindigkeitsnachteile</strong>.</li>
<li>Datenbanken sollten für Analysen nur genutzt werden, wenn die Daten nicht in den Arbeitsspeicher passen.</li>
</ul>
</section>
<section id="arbeit-mit-big-data-lösungen" class="slide level2" data-background="#0086C5">
<h2>Arbeit mit “Big Data Lösungen”</h2>
</section>
<section id="was-machen-big-data-lösungen-anders" class="slide level2">
<h2>Was machen “Big Data Lösungen” anders?</h2>
<p>Das Konzept MapReduce ist die Basis vieler “Big Data Lösungen”</p>
<p>Relationale Datenbanken gehen Tabellen i.d.R. zeilenweise durch, um ein Ergebnis zu generieren.</p>
<p>Demgegenüber setzen Lösungen für verteiltes Rechnen auf Varianten des von Google entwickelten Programmschemas <strong>“MapReduce”</strong>.</p>
<p><img data-src="static/mapreducewordcountoverview.png" height="250" /> (Quelle: <a href="https://blog.trifork.com/2009/08/04/introduction-to-hadoop/">Groningen 2009</a>)</p>
</section>
<section id="prinzip" class="slide level2">
<h2>Prinzip</h2>
<p>Eine <em>Datenbank</em> arbeit in der Regel sequentiell und benötigt für <strong>n Zeilen n Arbeitsschritte</strong>, um ein Ergebnis zu generieren.</p>
<p>Ein <em>verteilter Ansatz</em> benötigt zwar mehr Schritte (n+m+r mit m:Mapping, r:Reduktion) verteilt diese aber auf mehre Knoten.</p>
<p>Die <strong>Analysezeit</strong> steigt im Fall der <em>Datenbanken</em> also proportional zur Anzahl der Zeilen, während sie bei <em>MapReduce-Ansatz</em> proportional zur Zahl der Knoten sinkt.</p>
<p><strong>Je größer n wird, desto mehr Vorteile hat MapReduce gegenüber eine sequentiellen Verarbeitung.</strong></p>
</section>
<section id="hypothetischer-geschwindigkeitsvergleich" class="slide level2">
<h2>Hypothetischer Geschwindigkeitsvergleich</h2>
<p>Je höher die Zahl der Knoten, desto größer ist der Overhead durch den Algorithmus, aber auch der potentielle Geschwindigkeitsvorteil bei sehr großen Datenmengen.</p>
<table class="table table-striped table-hover table-condensed table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;font-weight: bold;color: white !important;background-color: #0086C5 !important;">
Zeilen
</th>
<th style="text-align:right;font-weight: bold;color: white !important;background-color: #0086C5 !important;">
Dauer pro Zeile
</th>
<th style="text-align:right;font-weight: bold;color: white !important;background-color: #0086C5 !important;">
Knoten
</th>
<th style="text-align:right;font-weight: bold;color: white !important;background-color: #0086C5 !important;">
Overhead
</th>
<th style="text-align:left;font-weight: bold;color: white !important;background-color: #0086C5 !important;">
Dauer DB
</th>
<th style="text-align:left;font-weight: bold;color: white !important;background-color: #0086C5 !important;">
Dauer MR
</th>
<th style="text-align:left;font-weight: bold;color: white !important;background-color: #0086C5 !important;">
Unterschied
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
1.000
</td>
<td style="text-align:right;">
0,001
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
1,2
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
138 %
</td>
</tr>
<tr>
<td style="text-align:left;">
10.000
</td>
<td style="text-align:right;">
0,001
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
1,2
</td>
<td style="text-align:left;">
10
</td>
<td style="text-align:left;">
3
</td>
<td style="text-align:left;">
29 %
</td>
</tr>
<tr>
<td style="text-align:left;">
100.000
</td>
<td style="text-align:right;">
0,001
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
1,2
</td>
<td style="text-align:left;">
100
</td>
<td style="text-align:left;">
18
</td>
<td style="text-align:left;">
18 %
</td>
</tr>
<tr>
<td style="text-align:left;">
1.000.000
</td>
<td style="text-align:right;">
0,001
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
1,2
</td>
<td style="text-align:left;">
1.000
</td>
<td style="text-align:left;">
168
</td>
<td style="text-align:left;">
17 %
</td>
</tr>
<tr>
<td style="text-align:left;">
10.000.000
</td>
<td style="text-align:right;">
0,001
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
1,2
</td>
<td style="text-align:left;">
10.000
</td>
<td style="text-align:left;">
1.668
</td>
<td style="text-align:left;">
17 %
</td>
</tr>
<tr>
<td style="text-align:left;">
100.000.000
</td>
<td style="text-align:right;">
0,001
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
1,2
</td>
<td style="text-align:left;">
100.000
</td>
<td style="text-align:left;">
16.668
</td>
<td style="text-align:left;">
17 %
</td>
</tr>
<tr>
<td style="text-align:left;">
1.000.000.000
</td>
<td style="text-align:right;">
0,001
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
1,2
</td>
<td style="text-align:left;">
1.000.000
</td>
<td style="text-align:left;">
166.668
</td>
<td style="text-align:left;">
17 %
</td>
</tr>
<tr>
<td style="text-align:left;">
10.000.000.000
</td>
<td style="text-align:right;">
0,001
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
1,2
</td>
<td style="text-align:left;">
10.000.000
</td>
<td style="text-align:left;">
1.666.668
</td>
<td style="text-align:left;">
17 %
</td>
</tr>
</tbody>
</table>
<p><em>Annahme:</em><br />
Der Overhead für MapReduce Operationen entspricht etwa 0.1 * (Maps+Reduces) = 0.1 * 2 * Knoten</p>
</section>
<section id="softwarebibliotheken" class="slide level2">
<h2>Softwarebibliotheken</h2>
<p><strong>Hadoop</strong> verteiltes Dateisystem auf Basis des MapReduce Prinzips, dass nach dem Prinzip eines Festplatten-RAID Systems funktioniert.</p>
<p><strong>Apache Spark</strong> ist ein Framework für Cluster Computing das auf Hadoop basiert. Es setzt statt auf Festplattenspeicher aber konsequent auf die Analyse der Daten im Arbeitsspeicher.</p>
<p><strong>CUDA</strong> ist eine vergleichbare Implementierung zum parallelen Ausführung gleichförmiger Aufgaben auf den Kernen von Grafikprozessoren (GPU).</p>
<p><strong>Disk.Frame</strong> und <strong>dask</strong> sind R (bzw. Python) Bibliotheken, die für die hoch parallelisierte Arbeit auf lokalen Rechnern nutzbar sind.</p>
<p><strong>Tensorflow GPU</strong>, <strong>RAPIDS</strong> und <strong>BlazingSQL</strong> nutzen GPUs für noch höhere Geschwindigkeiten. Sie sind nur in Python voll implementiert und erfordern teilweise Linux als OS.</p>
</section>
<section id="die-bibliothek-disk.frames-für-r" class="slide level2">
<h2>Die Bibliothek <strong>disk.frames</strong> für R</h2>
<p>Das Paket <strong>disk.frame</strong> wurde entwickelt, um mit R Daten parallelisiert zur analysieren, die nicht in den Arbeitsspeicher (RAM) passen. Es teilt den Datensatz dazu in Einzeldatensätze auf.</p>
<p>Diese <strong>Einzeldatensätze</strong> werden in einem Ordner gespeichert und können gemeinsam mit R wie ein großer Datensatz analysiert werden.</p>
<p>Der Ansatz von <em>disk.frame</em> ähnelt dabei Apache Spark, Dask und ähnlichen Systemen. Er ist besonders <strong>für medium sized data geeignet</strong>, die nicht in den RAM, wohl aber auf die Festplatte passen.</p>
<p>Für medium sized data, ist die Nutzung eines Computer-Clusters nicht nötig, durch disk.frame wird der <strong>Overhead</strong> bei vergleichbarer Performance deutlich reduziert</p>
</section>
<section id="wichtige-konzepte" class="slide level2">
<h2>Wichtige Konzepte</h2>
<p><em>disk.frame</em> nutzt wie die meisten Frameworks für verteilte Analysen die Konzepte <em>chunks</em> und <em>shards</em> bei der Datenaufteilung. Der Umgang damit ist zentral, für die Performance des Frameworks.</p>
<p>Die Einzeldatensätze werden als “chunks” bezeichnet. Sie haben eine feste Größe. Ihre Größe kann <strong>entweder</strong> durch den Parameter <em>Anzahl der Chunks</em> <strong>oder</strong> durch den Parameter <em>Chunk-Größe</em> beeinflusst werden.</p>
<p>Falls bestimmte Partitionen der Daten regelhaft vorkommen, bietet es sich an, die Einzeldatensätze in <strong>shards</strong> aufgrund eines sog. sharding-keys zu gruppieren. Dadurch können große Teile der Daten herausgefiltert werde und die Analyse wird beschleunigt. Dies funktioniert umso effektiver, je gleicher sich die Werte des sharding keys in den Daten verteilen (bspw. KV, Quartal, BSNR bei amb. Abrechnungsdaten).</p>
</section>
<section id="disk.frame-geschwindigkeitstest" class="slide level2">
<h2><strong>disk.frame</strong> Geschwindigkeitstest</h2>
<p>Die chunk-Anzahl entspricht hier der Anzahl der CPUs (max. Performance).</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" title="1"><span class="kw">suppressPackageStartupMessages</span>(<span class="kw">library</span>(disk.frame))</a>
<a class="sourceLine" id="cb10-2" title="2"><span class="kw">setup_disk.frame</span>() <span class="co"># 6 Workers</span></a>
<a class="sourceLine" id="cb10-3" title="3">dfflights &lt;-<span class="st"> </span><span class="kw">csv_to_disk.frame</span>(</a>
<a class="sourceLine" id="cb10-4" title="4">  <span class="st">&quot;data/flights.csv&quot;</span>, <span class="dt">outdir =</span> <span class="st">&quot;data/tmp_flights.df&quot;</span>,  <span class="dt">overwrite =</span> T)</a></code></pre></div>
<p>Die Analyse dauert mit 186 ms zwar länger als im RAM (43 ms), ist aber bereits mit diesem Datensatz, trotz des Overheads durch die Parallelisierung, ebenso schnell wie SQLite (183).</p>
<p><em>Hinweis: Die Ergebnisse für disk.frames und SQLite variieren, je nach momentaner Auslastung der Festplatte.</em></p>
</section>
<section id="logistische-regression" class="slide level2">
<h2>Logistische Regression</h2>
<p><em>Frage: Haben Nachtflüge häufiger &gt;10 Min. Verspätung?</em></p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" title="1">dfflights &lt;-<span class="st"> </span><span class="kw">csv_to_disk.frame</span>(<span class="st">&quot;data/flights.csv&quot;</span>, </a>
<a class="sourceLine" id="cb11-2" title="2">                               <span class="dt">outdir =</span> <span class="st">&quot;data/tmp_flights.df&quot;</span>,  <span class="dt">overwrite =</span> T)</a>
<a class="sourceLine" id="cb11-3" title="3">dfflights <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">delayed=</span>dep_delay<span class="op">&gt;</span><span class="dv">10</span>,</a>
<a class="sourceLine" id="cb11-4" title="4">                     <span class="dt">distance=</span>distance<span class="op">/</span><span class="dv">1000</span>,</a>
<a class="sourceLine" id="cb11-5" title="5">                     <span class="dt">nightstart =</span> (dep_time<span class="op">&lt;</span><span class="dv">600</span>) <span class="op">|</span>(dep_time<span class="op">&gt;</span><span class="dv">2000</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb11-6" title="6"><span class="st">  </span><span class="kw">dfglm</span>(delayed<span class="op">~</span><span class="dv">1</span><span class="op">+</span>distance<span class="op">+</span>nightstart ,<span class="dt">data=</span>., <span class="dt">family=</span><span class="kw">binomial</span>()) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb11-7" title="7"><span class="st">  </span>broom<span class="op">::</span><span class="kw">tidy</span>(<span class="dt">exponentiate=</span><span class="ot">TRUE</span>,<span class="dt">conf.int=</span><span class="ot">TRUE</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mykable</span>()</a></code></pre></div>
<table class="table table-striped table-hover table-condensed table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;font-weight: bold;color: white !important;background-color: #0086C5 !important;">
term
</th>
<th style="text-align:right;font-weight: bold;color: white !important;background-color: #0086C5 !important;">
estimate
</th>
<th style="text-align:right;font-weight: bold;color: white !important;background-color: #0086C5 !important;">
std.error
</th>
<th style="text-align:right;font-weight: bold;color: white !important;background-color: #0086C5 !important;">
p.value
</th>
<th style="text-align:right;font-weight: bold;color: white !important;background-color: #0086C5 !important;">
conf.low
</th>
<th style="text-align:right;font-weight: bold;color: white !important;background-color: #0086C5 !important;">
conf.high
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
(Intercept)
</td>
<td style="text-align:right;">
0,296
</td>
<td style="text-align:right;">
0,007
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0,292
</td>
<td style="text-align:right;">
0,301
</td>
</tr>
<tr>
<td style="text-align:left;">
distance
</td>
<td style="text-align:right;">
0,958
</td>
<td style="text-align:right;">
0,006
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0,947
</td>
<td style="text-align:right;">
0,969
</td>
</tr>
<tr>
<td style="text-align:left;">
nightstartTRUE
</td>
<td style="text-align:right;">
2,957
</td>
<td style="text-align:right;">
0,011
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
2,896
</td>
<td style="text-align:right;">
3,020
</td>
</tr>
</tbody>
</table>
<p><em>Man sollte lieber tagsüber von NYC starten…</em></p>
</section>
<section id="fazit" class="slide level2">
<h2>Fazit</h2>
<ul>
<li>Insgesamt bietet R <strong>verschiedene Möglichkeiten</strong>, mit großen Datensätzen zu arbeiten.</li>
<li>Ein einfachste Weg ist die Nutzung einer SQLite <strong>Datenbank als Backend</strong>.</li>
<li>Mit der neuen R-Bibliothek “disk.frame” ist demgegenüber aber ein <strong>zusätzlicher Performancegewinn</strong> zu erzielen.</li>
<li>Hinsichtlich der Nutzbarkeit <strong>statistischen Verfahren</strong> bestehen bei großen Datensätzen einige Limitationen, da nicht alle Modelle implementiert sind.</li>
<li>Viele <strong>Viele Regressionsanalysen</strong> sind möglich (alle glm-Modelle, wie lineare und logistische Regression)</li>
</ul>
</section>
    </div>
  </div>

  <script src="libs/reveal.js-3.3.0.1/lib/js/head.min.js"></script>
  <script src="libs/reveal.js-3.3.0.1/js/reveal.js"></script>

  <script>

      // Full list of configuration options available at:
      // https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        // Display the page number of the current slide
        slideNumber: true,
        // Push each slide change to the browser history
        history: true,
        // Vertical centering of slides
        center: false,
        // Opens links in an iframe preview overlay
        previewLinks: true,
        // Transition style
        transition: 'fade', // none/fade/slide/convex/concave/zoom
        // Transition style for full page slide backgrounds
        backgroundTransition: 'default', // none/fade/slide/convex/concave/zoom



        // Optional reveal.js plugins
        dependencies: [
        ]
      });
    </script>
  <!-- dynamically load mathjax for compatibility with self-contained -->
  <script>
    (function () {
      var script = document.createElement("script");
      script.type = "text/javascript";
      script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
      document.getElementsByTagName("head")[0].appendChild(script);
    })();
  </script>

<script>
  (function() {
    if (window.jQuery) {
      Reveal.addEventListener( 'slidechanged', function(event) {  
        window.jQuery(event.previousSlide).trigger('hidden');
        window.jQuery(event.currentSlide).trigger('shown');
      });
    }
  })();
</script>


  </body>
</html>
